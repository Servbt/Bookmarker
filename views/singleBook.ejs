<%- include("./components/navbar.ejs")%>

    <body>
        <!-- Display Data from server side on page -->
        <h1 class="test">Single Book Page</h1>
        <% if (locals.singleBook) { %>
            <h2 class="book-title">
                <%= singleBook.volumeInfo.title %>
            </h2>
            <h2 class="book-author">
                <%= singleBook.volumeInfo.authors[0] %>
            </h2>
            <p class="book-description">
                <%- singleBook.volumeInfo.description %>
            </p>
            <div>
                <!-- POST Request made for review route serverside -->
                <h3>Mark Book?</h3>
                <form class="text-center pt-2 form-body border border-5 rounded-5 mark-box" action="/api/review"
                    method="POST">

                    <!-- Book ID captured for google api used serverside -->
                    <label for="book" class="form-label cust-label pt-1 visually-hidden">book</label>
                    <input class="visually-hidden" value="<%= singleBook.id%>" name="book"></input>

                    <!-- Text For Review content -->
                    <label for="content" class="form-label cust-label pt-1">Content</label>
                    <textarea type="text" class="form-control border border-1 rounded-0 myText"
                        id="exampleFormControlTextarea1" rows="10 "
                        placeholder="this field is not required to mark book read or unread" name="content"></textarea>
                    <!-- Submit button for text content of review -->
                    <input class="btn btn-primary btn-lg my-3 create-button " type="submit" value="Make a Mark"
                        data-bs-toggle="modal" data-bs-target="#exampleModal">
                    <!-- boolean checkbox -->
                    <div class="btn-group post-review" role="group" aria-label="Basic checkbox toggle button group">
                        <input type="checkbox" class="btn-check" id="btncheck1" autocomplete="off" name="btncheck1">
                        <label class="btn btn-outline-primary post-review" for="btncheck1">mark read</label>
                    </div>
                </form>

            </div>
            <% if (locals.reviews) { %>
                <div class="user-review">
                    <% reviews.forEach(review=> { %>
                        <p class="review-cont">
                            <%= review.dataValues.content %> 
                        </p>
                        <p class="visually-hidden"><%= review.dataValues.user_id %></p>
                        <% }); %>
                </div>

                <% } %>

                    <% } %>

                        <!-- Bootsrap Modal for confirmation -->
                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                            aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        Mark Successfully Made!
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary">Look at My Mark</button>
                                    </div>
                                </div>
                            </div>
                        </div>
    </body>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>